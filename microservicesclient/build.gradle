/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/current/userguide/tutorial_java_projects.html
 */
buildscript {
    ext {}

    repositories {
        mavenLocal()
        jcenter()
        maven { url("https://plugins.gradle.org/m2/") }
    }
    dependencies {
        classpath ("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
        classpath ("io.spring.gradle:dependency-management-plugin:${dependencyManagementPluginVersion}")
//        classpath ("org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:${sonarqubeGradlePluginVersion}")
    }
}

apply plugin: "java"
apply plugin: "eclipse"
apply plugin: "idea"
apply plugin: "org.springframework.boot"

apply plugin: "io.spring.dependency-management"

repositories {
    jcenter()
    maven { url "https://plugins.gradle.org/m2/" }

    maven { url "https://repo.spring.io/milestone" }
    maven { url "https://repo.spring.io/libs-milestone" }

    maven { url "https://repo.spring.io/libs-snapshot" }
    maven { url "https://repo.spring.io/snapshot" }
}

//-----------------------------------------------------------------------//

dependencies {

    // Allow for configuration restart:
    compile ("org.springframework.cloud:spring-cloud-starter-config")


    // Required for Cloud Config Client FailFast retry options
    compile ("org.springframework.retry:spring-retry")
    compile ("org.springframework.boot:spring-boot-starter-aop")

    // This is a Web Application:
    compile("org.springframework.boot:spring-boot-starter-web")


    // Security:
    compile("org.springframework.boot:spring-boot-starter-security")
    testCompile("org.springframework.security:spring-security-test")

    // Tools
    compile("org.springframework.boot:spring-boot-starter-logging")
    compile("org.springframework.boot:spring-boot-starter-actuator")
    compile("org.springframework.boot:spring-boot-actuator-docs")
    runtime("org.springframework.boot:spring-boot-devtools")

    compile("org.springframework.boot:spring-boot-configuration-processor")


    // Testing
    testCompile("org.springframework.boot:spring-boot-starter-test")

}

dependencyManagement {
	imports {
		mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
//        mavenBom("io.spring.platform:platform-bom:${springIoVersion}")
	}
}

//---------------------------------------------------------------------------//

jar {
    baseName = "microservicesclient"
    version =  "${this.version}"
}

task("execJar", type:Jar, dependsOn: "jar") {
    baseName = "microservicesclient"
    version =  "${this.version}"
    classifier = "exec"
    from sourceSets.main.output
}

bootRepackage  {
    withJarTask = tasks["execJar"]
}


//---------------------------------------------------------------------------//
